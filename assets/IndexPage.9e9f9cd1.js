import{c as w,d as ue,l as fe,m as me,b as oe,Q as p,n as ve,R as ge,h as K,e as le}from"./QBtn.8127231c.js";import{T as be}from"./QItem.a52a8627.js";import{u as H,a as Z,h as he,c as ye,g as xe,m as Se}from"./diary.15522827.js";import{c as a,h as _,g as L,N as G,r as $,L as _e,P as qe,Y as Ce,O as Ve,w as ae,b as Fe,Z as ze,m as ke,o as Be,s as W,B as Y,x as De,v as I,u as P,F as ne,H as D,_ as J,y as ie,z as T,$ as R}from"./index.2c6a7d5a.js";import{u as Ne,a as $e,b as Ae,c as je,d as Ie,e as Pe,f as re,g as Oe,Q as Re,h as we}from"./QDate.b642eb68.js";const Le={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},X={xs:2,sm:4,md:8,lg:16,xl:24};w({name:"QSeparator",props:{...H,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const s=L(),r=Z(e,s.proxy.$q),g=a(()=>e.vertical===!0?"vertical":"horizontal"),u=a(()=>` q-separator--${g.value}`),d=a(()=>e.inset!==!1?`${u.value}-${Le[e.inset]}`:""),b=a(()=>`q-separator${u.value}${d.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(r.value===!0?" q-separator--dark":"")),x=a(()=>{const o={};if(e.size!==void 0&&(o[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const V=e.spaced===!0?`${X.md}px`:e.spaced in X?`${X[e.spaced]}px`:e.spaced,h=e.vertical===!0?["Left","Right"]:["Top","Bottom"];o[`margin${h[0]}`]=o[`margin${h[1]}`]=V}return o});return()=>_("hr",{class:b.value,style:x.value,"aria-orientation":g.value})}});const Qe=["top","middle","bottom"];w({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Qe.includes(e)}},setup(e,{slots:s}){const r=a(()=>e.align!==void 0?{verticalAlign:e.align}:null),g=a(()=>{const u=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(u!==void 0?` text-${u}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>_("div",{class:g.value,style:r.value,role:"status","aria-label":e.label},ue(s.default,e.label!==void 0?[e.label]:[]))}});const Te={xs:8,sm:10,md:14,lg:20,xl:24};var Me=w({name:"QChip",props:{...H,...fe,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:s,emit:r}){const{proxy:{$q:g}}=L(),u=Z(e,g),d=me(e,Te),b=a(()=>e.selected===!0||e.icon!==void 0),x=a(()=>e.selected===!0?e.iconSelected||g.iconSet.chip.selected:e.icon),o=a(()=>e.iconRemove||g.iconSet.chip.remove),V=a(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),h=a(()=>{const n=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(n?` text-${n} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(V.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(u.value===!0?" q-chip--dark q-dark":"")}),z=a(()=>{const n=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},F={...n,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||g.lang.label.remove};return{chip:n,remove:F}});function S(n){n.keyCode===13&&c(n)}function c(n){e.disable||(r("update:selected",!e.selected),r("click",n))}function f(n){(n.keyCode===void 0||n.keyCode===13)&&(G(n),e.disable===!1&&(r("update:modelValue",!1),r("remove")))}function m(){const n=[];V.value===!0&&n.push(_("div",{class:"q-focus-helper"})),b.value===!0&&n.push(_(p,{class:"q-chip__icon q-chip__icon--left",name:x.value}));const F=e.label!==void 0?[_("div",{class:"ellipsis"},[e.label])]:void 0;return n.push(_("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},ve(s.default,F))),e.iconRight&&n.push(_(p,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&n.push(_(p,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:o.value,...z.value.remove,onClick:f,onKeyup:f})),n}return()=>{if(e.modelValue===!1)return;const n={class:h.value,style:d.value};return V.value===!0&&Object.assign(n,z.value.chip,{onClick:c,onKeyup:S}),oe("div",n,m(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ge,e.ripple]])}}});function O(e,s,r,g){const u=[];return e.forEach(d=>{g(d)===!0?u.push(d):s.push({failedPropValidation:r,file:d})}),u}function M(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),G(e)}const pe={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ee=["rejected"];function Ue({editable:e,dnd:s,getFileInput:r,addFilesToQueue:g}){const{props:u,emit:d,proxy:b}=L(),x=$(null),o=a(()=>u.accept!==void 0?u.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),V=a(()=>parseInt(u.maxFiles,10)),h=a(()=>parseInt(u.maxTotalSize,10));function z(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&_e(t);else{const k=r();k&&k!==t.target&&k.click(t)}}function S(t){e.value&&t&&g(null,t)}function c(t,k,A,y){let l=Array.from(k||t.target.files);const q=[],j=()=>{q.length!==0&&d("rejected",q)};if(u.accept!==void 0&&o.value.indexOf("*/")===-1&&(l=O(l,q,"accept",v=>o.value.some(C=>v.type.toUpperCase().startsWith(C)||v.name.toUpperCase().endsWith(C))),l.length===0))return j();if(u.maxFileSize!==void 0){const v=parseInt(u.maxFileSize,10);if(l=O(l,q,"max-file-size",C=>C.size<=v),l.length===0)return j()}if(u.multiple!==!0&&l.length!==0&&(l=[l[0]]),l.forEach(v=>{v.__key=v.webkitRelativePath+v.lastModified+v.name+v.size}),y===!0){const v=A.map(C=>C.__key);l=O(l,q,"duplicate",C=>v.includes(C.__key)===!1)}if(l.length===0)return j();if(u.maxTotalSize!==void 0){let v=y===!0?A.reduce((C,E)=>C+E.size,0):0;if(l=O(l,q,"max-total-size",C=>(v+=C.size,v<=h.value)),l.length===0)return j()}if(typeof u.filter=="function"){const v=u.filter(l);l=O(l,q,"filter",C=>v.includes(C))}if(u.maxFiles!==void 0){let v=y===!0?A.length:0;if(l=O(l,q,"max-files",()=>(v++,v<=V.value)),l.length===0)return j()}if(j(),l.length!==0)return l}function f(t){M(t),s.value!==!0&&(s.value=!0)}function m(t){G(t),(t.relatedTarget!==null||qe.is.safari!==!0?t.relatedTarget!==x.value:document.elementsFromPoint(t.clientX,t.clientY).includes(x.value)===!1)===!0&&(s.value=!1)}function n(t){M(t);const k=t.dataTransfer.files;k.length!==0&&g(null,k),s.value=!1}function F(t){if(s.value===!0)return _("div",{ref:x,class:`q-${t}__dnd absolute-full`,onDragenter:M,onDragover:M,onDragleave:m,onDrop:n})}return Object.assign(b,{pickFiles:z,addFiles:S}),{pickFiles:z,addFiles:S,onDragover:f,onDragleave:m,processFiles:c,getDndNode:F,maxFilesNumber:V,maxTotalSizeNumber:h}}var Ke=w({name:"QFile",inheritAttrs:!1,props:{...Ne,...$e,...pe,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Ae,...Ee],setup(e,{slots:s,emit:r,attrs:g}){const{proxy:u}=L(),d=je(),b=$(null),x=$(!1),o=Ie(e),{pickFiles:V,onDragover:h,onDragleave:z,processFiles:S,getDndNode:c}=Ue({editable:d.editable,dnd:x,getFileInput:ee,addFilesToQueue:te}),f=Pe(e),m=a(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),n=a(()=>re(m.value)),F=a(()=>m.value.map(i=>i.name).join(", ")),t=a(()=>he(m.value.reduce((i,B)=>i+B.size,0))),k=a(()=>({totalSize:t.value,filesNumber:m.value.length,maxFiles:e.maxFiles})),A=a(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:o.value,...g,id:d.targetUid.value,disabled:d.editable.value!==!0})),y=a(()=>"q-file q-field--auto-height"+(x.value===!0?" q-file--dnd":"")),l=a(()=>e.multiple===!0&&e.append===!0);function q(i){const B=m.value.slice();B.splice(i,1),v(B)}function j(i){const B=m.value.indexOf(i);B!==-1&&q(B)}function v(i){r("update:modelValue",e.multiple===!0?i:i[0])}function C(i){i.keyCode===13&&Ve(i)}function E(i){(i.keyCode===13||i.keyCode===32)&&V(i)}function ee(){return b.value}function te(i,B){const N=S(i,B,m.value,l.value),U=ee();U!=null&&(U.value=""),N!==void 0&&((e.multiple===!0?e.modelValue&&N.every(de=>m.value.includes(de)):e.modelValue===N[0])||v(l.value===!0?m.value.concat(N):N))}function Q(){return[_("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function se(){if(s.file!==void 0)return m.value.length===0?Q():m.value.map((B,N)=>s.file({index:N,file:B,ref:this}));if(s.selected!==void 0)return m.value.length===0?Q():s.selected({files:m.value,ref:this});if(e.useChips===!0)return m.value.length===0?Q():m.value.map((B,N)=>_(Me,{key:"file-"+N,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{q(N)}},()=>_("span",{class:"ellipsis",textContent:B.name})));const i=e.displayValue!==void 0?e.displayValue:F.value;return i.length!==0?[_("div",{class:e.inputClass,style:e.inputStyle,textContent:i})]:Q()}function ce(){const i={ref:b,...A.value,...f.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:te};return e.multiple===!0&&(i.multiple=!0),_("input",i)}return Object.assign(d,{fieldClass:y,emitValue:v,hasValue:n,inputRef:b,innerValue:m,floatingLabel:a(()=>n.value===!0||re(e.displayValue)),computedCounter:a(()=>{if(e.counterLabel!==void 0)return e.counterLabel(k.value);const i=e.maxFiles;return`${m.value.length}${i!==void 0?" / "+i:""} (${t.value})`}),getControlChild:()=>c("file"),getControl:()=>{const i={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(i,{onDragover:h,onDragleave:z,onKeydown:C,onKeyup:E}),_("div",i,[ce()].concat(se()))}}),Object.assign(u,{removeAtIndex:q,removeFile:j,getNativeElement:()=>b.value}),Ce(u,"nativeEl",()=>b.value),Oe(d)}}),We=w({name:"QSplitter",props:{...H,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:s,emit:r}){const{proxy:{$q:g}}=L(),u=Z(e,g),d=$(null),b={before:$(null),after:$(null)},x=a(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(u.value===!0?" q-splitter--dark":"")),o=a(()=>e.horizontal===!0?"height":"width"),V=a(()=>e.reverse!==!0?"before":"after"),h=a(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function z(y){return(e.unit==="%"?y:Math.round(y))+e.unit}const S=a(()=>({[V.value]:{[o.value]:z(e.modelValue)}}));let c,f,m,n,F;function t(y){if(y.isFirst===!0){const q=d.value.getBoundingClientRect()[o.value];c=e.horizontal===!0?"up":"left",f=e.unit==="%"?100:q,m=Math.min(f,h.value[1],Math.max(h.value[0],e.modelValue)),n=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:g.lang.rtl===!0?-1:1)*(e.unit==="%"?q===0?0:100/q:1),d.value.classList.add("q-splitter--active");return}if(y.isFinal===!0){F!==e.modelValue&&r("update:modelValue",F),d.value.classList.remove("q-splitter--active");return}const l=m+n*(y.direction===c?-1:1)*y.distance[e.horizontal===!0?"y":"x"];F=Math.min(f,h.value[1],Math.max(h.value[0],l)),b[V.value].value.style[o.value]=z(F),e.emitImmediately===!0&&e.modelValue!==F&&r("update:modelValue",F)}const k=a(()=>[[be,t,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function A(y,l){y<l[0]?r("update:modelValue",l[0]):y>l[1]&&r("update:modelValue",l[1])}return ae(()=>e.modelValue,y=>{A(y,h.value)}),ae(()=>e.limits,()=>{Fe(()=>{A(e.modelValue,h.value)})}),()=>{const y=[_("div",{ref:b.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:S.value.before},K(s.before)),_("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[oe("div",{class:"q-splitter__separator-area absolute-full"},K(s.separator),"sep",e.disable!==!0,()=>k.value)]),_("div",{ref:b.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:S.value.after},K(s.after))];return _("div",{class:x.value,ref:d},ue(s.default,y))}}});const Ye={class:"title"},Je={class:"date"},Xe={class:"content"},He={key:1,class:"noDiary"},Ze=R("div",null,"\u6682\u65E0\u65E5\u8BB0",-1),nt=Object.assign({name:"IndexPage"},{__name:"IndexPage",setup(e){let s=$(null),r=ye();async function g(){const S=s.value;if(!S||!S.name.endsWith(".ed")){alert("\u8BF7\u9009\u62E9\u4E00\u4E2A .ed \u6587\u4EF6");return}const c=await S.text();let f=JSON.parse(c).data;console.log("\u5DF2\u89E3\u6790:",f),r.diaries=f,x.value=r.diaries[r.diaries.length-1].date,h()}function u(){r.deleteDiary(o.index),z()}let d=ze(),b=$(50),x=$(xe()),o=ke({title:"",date:"",content:"",index:""}),V=a(()=>{let S=[];return r.diaries.forEach(c=>{c.content!==""&&S.push(c.date)}),S});function h(){let S=x.value,c=r.diaries.findIndex(f=>f.date===S);c!==-1?(o.title=r.diaries[c].title,o.date=r.diaries[c].date,o.content=r.diaries[c].content,o.index=c):z(),console.log(o)}function z(){o.title="",o.date="",o.content="",o.index=""}return Be(()=>{h()}),(S,c)=>(W(),Y(ne,null,[De("",!0),I(Re,null,{default:P(()=>[I(Ke,{filled:"","bottom-slots":"",modelValue:D(s),"onUpdate:modelValue":[c[1]||(c[1]=f=>J(s)?s.value=f:s=f),g],label:"\u9009\u62E9\u65E5\u8BB0.ed\u6587\u4EF6",counter:"","max-files":"1",class:"q-pa-md"},{before:P(()=>[I(p,{name:"folder_open"})]),hint:P(()=>[ie(" \u5171"+T(D(r).diaries.length)+"\u6761\u65E5\u8BB0 ",1)]),_:1},8,["modelValue"]),I(We,{modelValue:D(b),"onUpdate:modelValue":c[4]||(c[4]=f=>J(b)?b.value=f:b=f),horizontal:!0,class:"q-pa-md flex center"},{before:P(()=>[I(we,{modelValue:D(x),"onUpdate:modelValue":[c[2]||(c[2]=f=>J(x)?x.value=f:x=f),h],events:D(V),"event-color":"orange",style:{width:"100%"},locale:D(Se)},null,8,["modelValue","events","locale"])]),after:P(()=>[D(o).content!==""?(W(),Y(ne,{key:0},[R("div",Ye,[R("span",null,T(D(o).title),1),I(le,{flat:"",dense:"",round:"",onClick:u,label:"\u5220\u9664"})]),R("p",Je,T(D(o).date),1),R("p",Xe,T(D(o).content),1)],64)):(W(),Y("div",He,[Ze,I(le,{round:"",color:"primary",onClick:c[3]||(c[3]=f=>D(d).push("/add"))},{default:P(()=>[ie("\u6DFB\u52A0")]),_:1})]))]),_:1},8,["modelValue"])]),_:1})],64))}});export{nt as default};
