import{a as e,V as o,w as t,o as l,g as n,b as i,P as s,l as r,N as d,W as a,X as c}from"./index.92600922.js";import{v as u,i as w,j as f,k as v}from"./QBtn.8aa00b81.js";function m(t,l,n){let i;function s(){void 0!==i&&(o.remove(i),i=void 0)}return e((()=>{!0===t.value&&s()})),{removeFromHistory:s,addToHistory(){i={condition:()=>!0===n.value,handler:l},o.add(i)}}}const p={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},h=["beforeShow","show","beforeHide","hide"];function y({showing:e,canShow:o,hideOnRouteChange:s,handleShow:r,handleHide:d,processOnMount:a}){const c=n(),{props:w,emit:f,proxy:v}=c;let m;function p(e){if(!0===w.disable||void 0!==e&&!0===e.qAnchorHandled||void 0!==o&&!0!==o(e))return;const t=void 0!==w["onUpdate:modelValue"];!0===t&&(f("update:modelValue",!0),m=e,i((()=>{m===e&&(m=void 0)}))),null!==w.modelValue&&!1!==t||h(e)}function h(o){!0!==e.value&&(e.value=!0,f("beforeShow",o),void 0!==r?r(o):f("show",o))}function y(e){if(!0===w.disable)return;const o=void 0!==w["onUpdate:modelValue"];!0===o&&(f("update:modelValue",!1),m=e,i((()=>{m===e&&(m=void 0)}))),null!==w.modelValue&&!1!==o||g(e)}function g(o){!1!==e.value&&(e.value=!1,f("beforeHide",o),void 0!==d?d(o):f("hide",o))}function b(o){if(!0===w.disable&&!0===o)void 0!==w["onUpdate:modelValue"]&&f("update:modelValue",!1);else if(!0===o!==e.value){(!0===o?h:g)(m)}}t((()=>w.modelValue),b),void 0!==s&&!0===u(c)&&t((()=>v.$route.fullPath),(()=>{!0===s.value&&!0===e.value&&y()})),!0===a&&l((()=>{b(w.modelValue)}));const L={show:p,hide:y,toggle:function(o){!0===e.value?y(o):p(o)}};return Object.assign(v,L),L}const g=[null,document,document.body,document.scrollingElement,document.documentElement];function b(e,o){let t=w(o);if(void 0===t){if(null==e)return window;t=e.closest(".scroll,.scroll-y,.overflow-auto")}return g.includes(t)?window:t}function L(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function T(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let E;function V(){if(void 0!==E)return E;const e=document.createElement("p"),o=document.createElement("div");f(e,{width:"100%",height:"200px"}),f(o,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),o.appendChild(e),document.body.appendChild(o);const t=e.offsetWidth;o.style.overflow="scroll";let l=e.offsetWidth;return t===l&&(l=o.clientWidth),o.remove(),E=t-l,E}function H(e,o=!0){return!(!e||e.nodeType!==Node.ELEMENT_NODE)&&(o?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"])))}let x,C,q,S,W,X,M=0,O=!1,P=null;function Y(e){(function(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const o=a(e),t=e.shiftKey&&!e.deltaX,l=!t&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),n=t||l?e.deltaY:e.deltaX;for(let i=0;i<o.length;i++){const e=o[i];if(H(e,l))return l?n<0&&0===e.scrollTop||n>0&&e.scrollTop+e.clientHeight===e.scrollHeight:n<0&&0===e.scrollLeft||n>0&&e.scrollLeft+e.clientWidth===e.scrollWidth}return!0})(e)&&d(e)}function j(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function N(e){!0!==O&&(O=!0,requestAnimationFrame((()=>{O=!1;const{height:o}=e.target,{clientHeight:t,scrollTop:l}=document.scrollingElement;void 0!==q&&o===window.innerHeight||(q=t-o,document.scrollingElement.scrollTop=l),l>q&&(document.scrollingElement.scrollTop-=Math.ceil((l-q)/8))})))}function U(e){const o=document.body,t=void 0!==window.visualViewport;if("add"===e){const{overflowY:e,overflowX:l}=window.getComputedStyle(o);x=T(window),C=L(window),S=o.style.left,W=o.style.top,X=window.location.href,o.style.left=`-${x}px`,o.style.top=`-${C}px`,"hidden"!==l&&("scroll"===l||o.scrollWidth>window.innerWidth)&&o.classList.add("q-body--force-scrollbar-x"),"hidden"!==e&&("scroll"===e||o.scrollHeight>window.innerHeight)&&o.classList.add("q-body--force-scrollbar-y"),o.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,!0===s.is.ios&&(!0===t?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",N,r.passiveCapture),window.visualViewport.addEventListener("scroll",N,r.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",j,r.passiveCapture))}!0===s.is.desktop&&!0===s.is.mac&&window[`${e}EventListener`]("wheel",Y,r.notPassive),"remove"===e&&(!0===s.is.ios&&(!0===t?(window.visualViewport.removeEventListener("resize",N,r.passiveCapture),window.visualViewport.removeEventListener("scroll",N,r.passiveCapture)):window.removeEventListener("scroll",j,r.passiveCapture)),o.classList.remove("q-body--prevent-scroll"),o.classList.remove("q-body--force-scrollbar-x"),o.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,o.style.left=S,o.style.top=W,window.location.href===X&&window.scrollTo(x,C),q=void 0)}function $(){let e;return{preventBodyScroll(o){o===e||void 0===e&&!0!==o||(e=o,function(e){let o="add";if(!0===e){if(M++,null!==P)return clearTimeout(P),void(P=null);if(M>1)return}else{if(0===M)return;if(M--,M>0)return;if(o="remove",!0===s.is.ios&&!0===s.is.nativeMobile)return null!==P&&clearTimeout(P),void(P=setTimeout((()=>{U(o),P=null}),100))}U(o)}(o))}}}function k(){let o=null;const t=n();function l(){null!==o&&(clearTimeout(o),o=null)}return c(l),e(l),{removeTimeout:l,registerTimeout(e,n){l(),!1===v(t)&&(o=setTimeout((()=>{o=null,e()}),n))}}}export{h as a,k as b,y as c,m as d,$ as e,L as f,b as g,T as h,V as i,p as u};
