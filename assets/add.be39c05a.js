import{k as e,p as t,c as o,h as n,q as a,f as l,Q as i,e as s}from"./QBtn.8aa00b81.js";import{r,i as u,j as c,u as d,a as f,b as v,d as m,e as p,f as h,c as g,g as y,Q as x,h as b}from"./QDate.ddfbf565.js";import{X as w,a as k,b as S,g as q,c as E,a7 as M,r as C,q as R,Y as T,h as _,a8 as O,I as P,P as B,w as V,T as $,O as F,J as H,o as A,K as L,l as j,M as z,N as W,a9 as D,L as N,p as K,a3 as Q,a0 as I,Z,m as U,s as Y,t as X,u as G,v as J,$ as ee,j as te,aa as oe}from"./index.92600922.js";import{u as ne,a as ae,b as le,c as ie,d as se,e as re,i as ue,g as ce}from"./use-timeout.cbaf054f.js";import{d as de,u as fe,a as ve,c as me,g as pe}from"./diary.06f8a4d0.js";function he(){let t;const o=q();function n(){t=void 0}return w(n),k(n),{removeTick:n,registerTick(n){t=n,S((()=>{t===n&&(!1===e(o)&&t(),t=void 0)}))}}}const ge={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function ye(e,t=(()=>{}),o=(()=>{})){return{transitionProps:E((()=>{const n=`q-transition--${e.transitionShow||t()}`,a=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${n}-enter-from`,enterActiveClass:`${n}-enter-active`,enterToClass:`${n}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}})),transitionStyle:E((()=>`--q-transition-duration: ${e.transitionDuration}ms`))}}let xe=1,be=document.body;const we=[];function ke(e,o){do{if("QMenu"===e.$options.name){if(e.hide(o),!0===e.$props.separateClosePopup)return t(e)}else if(!0===e.__qPortal){const n=t(e);return void 0!==n&&"QPopupProxy"===n.$options.name?(e.hide(o),n):e}e=t(e)}while(null!=e)}function Se(e,t,o,n){const a=C(!1),l=C(!1);let i=null;const s={},c="dialog"===n&&function(e){for(e=e.parent;null!=e;){if("QGlobalDialog"===e.type.name)return!0;if("QDialog"===e.type.name||"QMenu"===e.type.name)return!1;e=e.parent}return!1}(e);function d(t){if(l.value=!1,!0!==t)return;r(s),a.value=!1;const o=we.indexOf(e.proxy);-1!==o&&we.splice(o,1),null!==i&&(i.remove(),i=null)}return R((()=>{d(!0)})),e.proxy.__qPortal=!0,T(e.proxy,"contentEl",(()=>t.value)),{showPortal:function(t){if(!0===t)return r(s),void(l.value=!0);l.value=!1,!1===a.value&&(!1===c&&null===i&&(i=function(e,t){const o=document.createElement("div");if(o.id=void 0!==t?`q-portal--${t}--${xe++}`:e,void 0!==M.globalNodes){const e=M.globalNodes.class;void 0!==e&&(o.className=e)}return be.appendChild(o),o}(!1,n)),a.value=!0,we.push(e.proxy),u(s))},hidePortal:d,portalIsActive:a,portalIsAccessible:l,renderPortal:()=>!0===c?o():!0===a.value?[_(O,{to:i},o())]:void 0}}const qe=[];let Ee;function Me(e){Ee=27===e.keyCode}function Ce(){!0===Ee&&(Ee=!1)}function Re(e){!0===Ee&&(Ee=!1,!0===P(e,27)&&qe[qe.length-1](e))}function Te(e){window[e]("keydown",Me),window[e]("blur",Ce),window[e]("keyup",Re),Ee=!1}function _e(e){!0===B.is.desktop&&(qe.push(e),1===qe.length&&Te("addEventListener"))}function Oe(e){const t=qe.indexOf(e);-1!==t&&(qe.splice(t,1),0===qe.length&&Te("removeEventListener"))}const Pe=[];function Be(e){Pe[Pe.length-1](e)}function Ve(e){!0===B.is.desktop&&(Pe.push(e),1===Pe.length&&document.body.addEventListener("focusin",Be))}function $e(e){const t=Pe.indexOf(e);-1!==t&&(Pe.splice(t,1),0===Pe.length&&document.body.removeEventListener("focusin",Be))}let Fe=0;const He={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Ae={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Le=o({name:"QDialog",inheritAttrs:!1,props:{...ne,...ge,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>"standard"===e||["top","bottom","left","right"].includes(e)}},emits:[...ae,"shake","click","escapeKey"],setup(e,{slots:t,emit:o,attrs:l}){const i=q(),s=C(null),r=C(!1),u=C(!1);let d,f,v=null,m=null;const p=E((()=>!0!==e.persistent&&!0!==e.noRouteDismiss&&!0!==e.seamless)),{preventBodyScroll:h}=re(),{registerTimeout:g}=le(),{registerTick:y,removeTick:x}=he(),{transitionProps:b,transitionStyle:w}=ye(e,(()=>Ae[e.position][0]),(()=>Ae[e.position][1])),S=E((()=>w.value+(void 0!==e.backdropFilter?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:""))),{showPortal:M,hidePortal:R,portalIsAccessible:T,renderPortal:O}=Se(i,s,(function(){return _("div",{role:"dialog","aria-modal":!0===A.value?"true":"false",...l,class:j.value},[_($,{name:"q-transition--fade",appear:!0},(()=>!0===A.value?_("div",{class:"q-dialog__backdrop fixed-full",style:S.value,"aria-hidden":"true",tabindex:-1,onClick:I}):null)),_($,b.value,(()=>!0===r.value?_("div",{ref:s,class:H.value,style:w.value,tabindex:-1,...L.value},n(t.default)):null))])}),"dialog"),{hide:P}=ie({showing:r,hideOnRouteChange:p,handleShow:function(t){B(),m=!1===e.noRefocus&&null!==document.activeElement?document.activeElement:null,K(e.maximized),M(),u.value=!0,!0!==e.noFocus?(null!==document.activeElement&&document.activeElement.blur(),y(z)):x();g((()=>{if(!0===i.proxy.$q.platform.is.ios){if(!0!==e.seamless&&document.activeElement){const{top:e,bottom:t}=document.activeElement.getBoundingClientRect(),{innerHeight:o}=window,n=void 0!==window.visualViewport?window.visualViewport.height:o;e>0&&t>n/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-n,t>=o?1/0:Math.ceil(document.scrollingElement.scrollTop+t-n/2))),document.activeElement.scrollIntoView()}f=!0,s.value.click(),f=!1}M(!0),u.value=!1,o("show",t)}),e.transitionDuration)},handleHide:function(t){x(),F(),N(!0),u.value=!0,R(),null!==m&&(((t&&0===t.type.indexOf("key")?m.closest('[tabindex]:not([tabindex^="-"])'):void 0)||m).focus(),m=null);g((()=>{R(!0),u.value=!1,o("hide",t)}),e.transitionDuration)},processOnMount:!0}),{addToHistory:B,removeFromHistory:F}=se(r,P,p),H=E((()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${!0===e.maximized?"maximized":"minimized"} q-dialog__inner--${e.position} ${He[e.position]}`+(!0===u.value?" q-dialog__inner--animating":"")+(!0===e.fullWidth?" q-dialog__inner--fullwidth":"")+(!0===e.fullHeight?" q-dialog__inner--fullheight":"")+(!0===e.square?" q-dialog__inner--square":""))),A=E((()=>!0===r.value&&!0!==e.seamless)),L=E((()=>!0===e.autoClose?{onClick:Q}:{})),j=E((()=>["q-dialog fullscreen no-pointer-events q-dialog--"+(!0===A.value?"modal":"seamless"),l.class]));function z(e){c((()=>{let t=s.value;null!==t&&!0!==t.contains(document.activeElement)&&(t=(""!==e?t.querySelector(e):null)||t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))}))}function W(e){e&&"function"==typeof e.focus?e.focus({preventScroll:!0}):z(),o("shake");const t=s.value;null!==t&&(t.classList.remove("q-animate--scale"),t.classList.add("q-animate--scale"),null!==v&&clearTimeout(v),v=setTimeout((()=>{v=null,null!==s.value&&(t.classList.remove("q-animate--scale"),z())}),170))}function D(){!0!==e.seamless&&(!0===e.persistent||!0===e.noEscDismiss?!0!==e.maximized&&!0!==e.noShake&&W():(o("escapeKey"),P()))}function N(t){null!==v&&(clearTimeout(v),v=null),!0!==t&&!0!==r.value||(K(!1),!0!==e.seamless&&(h(!1),$e(Z),Oe(D))),!0!==t&&(m=null)}function K(e){!0===e?!0!==d&&(Fe<1&&document.body.classList.add("q-body--dialog"),Fe++,d=!0):!0===d&&(Fe<2&&document.body.classList.remove("q-body--dialog"),Fe--,d=!1)}function Q(e){!0!==f&&(P(e),o("click",e))}function I(t){!0!==e.persistent&&!0!==e.noBackdropDismiss?P(t):!0!==e.noShake&&W()}function Z(t){!0!==e.allowFocusOutside&&!0===T.value&&!0!==a(s.value,t.target)&&z('[tabindex]:not([tabindex="-1"])')}return V((()=>e.maximized),(e=>{!0===r.value&&K(e)})),V(A,(e=>{h(e),!0===e?(Ve(Z),_e(D)):($e(Z),Oe(D))})),Object.assign(i.proxy,{focus:z,shake:W,__updateRefocusTarget(e){m=e||null}}),k(N),O}});const je={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function ze({showing:e,avoidEmit:t,configureAnchorEl:o}){const{props:n,proxy:a,emit:l}=q(),i=C(null);let s=null;function r(e){return null!==i.value&&(void 0===e||void 0===e.touches||e.touches.length<=1)}const u={};function c(){L(u,"anchor")}function d(){if(!1===n.target||""===n.target||null===a.$el.parentNode)i.value=null;else if(!0===n.target)!function(e){for(i.value=e;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;o()}(a.$el.parentNode);else{let t=n.target;if("string"==typeof n.target)try{t=document.querySelector(n.target)}catch(e){t=void 0}null!=t?(i.value=t.$el||t,o()):(i.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return void 0===o&&(Object.assign(u,{hide(e){a.hide(e)},toggle(e){a.toggle(e),e.qAnchorHandled=!0},toggleKey(e){!0===P(e,13)&&u.toggle(e)},contextClick(e){a.hide(e),F(e),S((()=>{a.show(e),e.qAnchorHandled=!0}))},prevent:F,mobileTouch(e){if(u.mobileCleanup(e),!0!==r(e))return;a.hide(e),i.value.classList.add("non-selectable");const t=e.target;H(u,"anchor",[[t,"touchmove","mobileCleanup","passive"],[t,"touchend","mobileCleanup","passive"],[t,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),s=setTimeout((()=>{s=null,a.show(e),e.qAnchorHandled=!0}),300)},mobileCleanup(t){i.value.classList.remove("non-selectable"),null!==s&&(clearTimeout(s),s=null),!0===e.value&&void 0!==t&&de()}}),o=function(e=n.contextMenu){if(!0===n.noParentEvent||null===i.value)return;let t;t=!0===e?!0===a.$q.platform.is.mobile?[[i.value,"touchstart","mobileTouch","passive"]]:[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],H(u,"anchor",t)}),V((()=>n.contextMenu),(e=>{null!==i.value&&(c(),o(e))})),V((()=>n.target),(()=>{null!==i.value&&c(),d()})),V((()=>n.noParentEvent),(e=>{null!==i.value&&(!0===e?c():o())})),A((()=>{d(),!0!==t&&!0===n.modelValue&&null===i.value&&l("update:modelValue",!1)})),k((()=>{null!==s&&clearTimeout(s),c()})),{anchorEl:i,canShow:r,anchorEvents:u}}const{notPassiveCapture:We}=j,De=[];function Ne(e){const t=e.target;if(void 0===t||8===t.nodeType||!0===t.classList.contains("no-pointer-events"))return;let o=we.length-1;for(;o>=0;){const e=we[o].$;if("QTooltip"!==e.type.name){if("QDialog"!==e.type.name)break;if(!0!==e.props.seamless)return;o--}else o--}for(let n=De.length-1;n>=0;n--){const o=De[n];if(null!==o.anchorEl.value&&!1!==o.anchorEl.value.contains(t)||t!==document.body&&(null===o.innerRef.value||!1!==o.innerRef.value.contains(t)))return;e.qClickOutside=!0,o.onClickOutside(e)}}function Ke(e){const t=De.findIndex((t=>t===e));-1!==t&&(De.splice(t,1),0===De.length&&(document.removeEventListener("mousedown",Ne,We),document.removeEventListener("touchstart",Ne,We)))}let Qe,Ie;function Ze(e){const t=e.split(" ");return 2===t.length&&(!0!==["top","center","bottom"].includes(t[0])?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):!0===["left","middle","right","start","end"].includes(t[1])||(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1))}const Ue={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function Ye(e,t){const o=e.split(" ");return{vertical:o[0],horizontal:Ue[`${o[1]}#${!0===t?"rtl":"ltr"}`]}}function Xe(e,t,o,n){return{top:e[o.vertical]-t[n.vertical],left:e[o.horizontal]-t[n.horizontal]}}function Ge(e,t=0){if(null===e.targetEl||null===e.anchorEl||t>5)return;if(0===e.targetEl.offsetHeight||0===e.targetEl.offsetWidth)return void setTimeout((()=>{Ge(e,t+1)}),10);const{targetEl:o,offset:n,anchorEl:a,anchorOrigin:l,selfOrigin:i,absoluteOffset:s,fit:r,cover:u,maxHeight:c,maxWidth:d}=e;if(!0===B.is.ios&&void 0!==window.visualViewport){const e=document.body.style,{offsetLeft:t,offsetTop:o}=window.visualViewport;t!==Qe&&(e.setProperty("--q-pe-left",t+"px"),Qe=t),o!==Ie&&(e.setProperty("--q-pe-top",o+"px"),Ie=o)}const{scrollLeft:f,scrollTop:v}=o,m=void 0===s?function(e,t){let{top:o,left:n,right:a,bottom:l,width:i,height:s}=e.getBoundingClientRect();return void 0!==t&&(o-=t[1],n-=t[0],l+=t[1],a+=t[0],i+=t[0],s+=t[1]),{top:o,bottom:l,height:s,left:n,right:a,width:i,middle:n+(a-n)/2,center:o+(l-o)/2}}(a,!0===u?[0,0]:n):function(e,t,o){let{top:n,left:a}=e.getBoundingClientRect();return n+=t.top,a+=t.left,void 0!==o&&(n+=o[1],a+=o[0]),{top:n,bottom:n+1,height:1,left:a,right:a+1,width:1,middle:a,center:n}}(a,s,n);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:d||"100vw",maxHeight:c||"100vh",visibility:"visible"});const{offsetWidth:p,offsetHeight:h}=o,{elWidth:g,elHeight:y}=!0===r||!0===u?{elWidth:Math.max(m.width,p),elHeight:!0===u?Math.max(m.height,h):h}:{elWidth:p,elHeight:h};let x={maxWidth:d,maxHeight:c};!0!==r&&!0!==u||(x.minWidth=m.width+"px",!0===u&&(x.minHeight=m.height+"px")),Object.assign(o.style,x);const b={top:0,center:(k=y)/2,bottom:k,left:0,middle:(w=g)/2,right:w};var w,k;let S=Xe(m,b,l,i);if(void 0===s||void 0===n)Je(S,m,b,l,i);else{const{top:e,left:t}=S;Je(S,m,b,l,i);let o=!1;if(S.top!==e){o=!0;const e=2*n[1];m.center=m.top-=e,m.bottom-=e+2}if(S.left!==t){o=!0;const e=2*n[0];m.middle=m.left-=e,m.right-=e+2}!0===o&&(S=Xe(m,b,l,i),Je(S,m,b,l,i))}x={top:S.top+"px",left:S.left+"px"},void 0!==S.maxHeight&&(x.maxHeight=S.maxHeight+"px",m.height>S.maxHeight&&(x.minHeight=x.maxHeight)),void 0!==S.maxWidth&&(x.maxWidth=S.maxWidth+"px",m.width>S.maxWidth&&(x.minWidth=x.maxWidth)),Object.assign(o.style,x),o.scrollTop!==v&&(o.scrollTop=v),o.scrollLeft!==f&&(o.scrollLeft=f)}function Je(e,t,o,n,a){const l=o.bottom,i=o.right,s=ue(),r=window.innerHeight-s,u=document.body.clientWidth;if(e.top<0||e.top+l>r)if("center"===a.vertical)e.top=t[n.vertical]>r/2?Math.max(0,r-l):0,e.maxHeight=Math.min(l,r);else if(t[n.vertical]>r/2){const o=Math.min(r,"center"===n.vertical?t.center:n.vertical===a.vertical?t.bottom:t.top);e.maxHeight=Math.min(l,o),e.top=Math.max(0,o-l)}else e.top=Math.max(0,"center"===n.vertical?t.center:n.vertical===a.vertical?t.top:t.bottom),e.maxHeight=Math.min(l,r-e.top);if(e.left<0||e.left+i>u)if(e.maxWidth=Math.min(i,u),"middle"===a.horizontal)e.left=t[n.horizontal]>u/2?Math.max(0,u-i):0;else if(t[n.horizontal]>u/2){const o=Math.min(u,"middle"===n.horizontal?t.middle:n.horizontal===a.horizontal?t.right:t.left);e.maxWidth=Math.min(i,o),e.left=Math.max(0,o-e.maxWidth)}else e.left=Math.max(0,"middle"===n.horizontal?t.middle:n.horizontal===a.horizontal?t.left:t.right),e.maxWidth=Math.min(i,u-e.left)}["left","middle","right"].forEach((e=>{Ue[`${e}#ltr`]=e,Ue[`${e}#rtl`]=e}));var et=o({name:"QMenu",inheritAttrs:!1,props:{...je,...ne,...fe,...ge,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ze},self:{type:String,validator:Ze},offset:{type:Array,validator:function(e){return!e||2===e.length&&("number"==typeof e[0]&&"number"==typeof e[1])}},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ae,"click","escapeKey"],setup(e,{slots:t,emit:o,attrs:l}){let i,s,r,u=null;const d=q(),{proxy:f}=d,{$q:v}=f,m=C(null),p=C(!1),h=E((()=>!0!==e.persistent&&!0!==e.noRouteDismiss)),g=ve(e,v),{registerTick:y,removeTick:x}=he(),{registerTimeout:b}=le(),{transitionProps:w,transitionStyle:S}=ye(e),{localScrollTarget:M,changeScrollEvent:R,unconfigureScrollTarget:T}=function(e,t){const o=C(null);let n;function a(e,t){const o=(void 0!==t?"add":"remove")+"EventListener",a=void 0!==t?t:n;e!==window&&e[o]("scroll",a,j.passive),window[o]("scroll",a,j.passive),n=t}function l(){null!==o.value&&(a(o.value),o.value=null)}const i=V((()=>e.noParentEvent),(()=>{null!==o.value&&(l(),t())}));return k(i),{localScrollTarget:o,unconfigureScrollTarget:l,changeScrollEvent:a}}(e,Y),{anchorEl:O,canShow:P}=ze({showing:p}),{hide:B}=ie({showing:p,canShow:P,handleShow:function(t){if(u=!1===e.noRefocus?document.activeElement:null,Ve(G),F(),Y(),i=void 0,void 0!==t&&(e.touchPosition||e.contextMenu)){const e=z(t);if(void 0!==e.left){const{top:t,left:o}=O.value.getBoundingClientRect();i={left:e.left-o,top:e.top-t}}}void 0===s&&(s=V((()=>v.screen.width+"|"+v.screen.height+"|"+e.self+"|"+e.anchor+"|"+v.lang.rtl),ee));!0!==e.noFocus&&document.activeElement.blur();y((()=>{ee(),!0!==e.noFocus&&Z()})),b((()=>{!0===v.platform.is.ios&&(r=e.autoClose,m.value.click()),ee(),F(!0),o("show",t)}),e.transitionDuration)},handleHide:function(t){x(),H(),U(!0),null===u||void 0!==t&&!0===t.qClickOutside||(((t&&0===t.type.indexOf("key")?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null);b((()=>{H(!0),o("hide",t)}),e.transitionDuration)},hideOnRouteChange:h,processOnMount:!0}),{showPortal:F,hidePortal:H,renderPortal:A}=Se(d,m,(function(){return _($,w.value,(()=>!0===p.value?_("div",{role:"menu",...l,ref:m,tabindex:-1,class:["q-menu q-position-engine scroll"+K.value,l.class],style:[l.style,S.value],...Q.value},n(t.default)):null))}),"menu"),L={anchorEl:O,innerRef:m,onClickOutside(t){if(!0!==e.persistent&&!0===p.value)return B(t),("touchstart"===t.type||t.target.classList.contains("q-dialog__backdrop"))&&W(t),!0}},D=E((()=>Ye(e.anchor||(!0===e.cover?"center middle":"bottom start"),v.lang.rtl))),N=E((()=>!0===e.cover?D.value:Ye(e.self||"top start",v.lang.rtl))),K=E((()=>(!0===e.square?" q-menu--square":"")+(!0===g.value?" q-menu--dark q-dark":""))),Q=E((()=>!0===e.autoClose?{onClick:X}:{})),I=E((()=>!0===p.value&&!0!==e.persistent));function Z(){c((()=>{let e=m.value;e&&!0!==e.contains(document.activeElement)&&(e=e.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.querySelector("[autofocus], [data-autofocus]")||e,e.focus({preventScroll:!0}))}))}function U(e){i=void 0,void 0!==s&&(s(),s=void 0),!0!==e&&!0!==p.value||($e(G),T(),Ke(L),Oe(J)),!0!==e&&(u=null)}function Y(){null===O.value&&void 0===e.scrollTarget||(M.value=ce(O.value,e.scrollTarget),R(M.value,ee))}function X(e){!0!==r?(ke(f,e),o("click",e)):r=!1}function G(t){!0===I.value&&!0!==e.noFocus&&!0!==a(m.value,t.target)&&Z()}function J(e){o("escapeKey"),B(e)}function ee(){Ge({targetEl:m.value,offset:e.offset,anchorEl:O.value,anchorOrigin:D.value,selfOrigin:N.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}return V(I,(e=>{!0===e?(_e(J),function(e){De.push(e),1===De.length&&(document.addEventListener("mousedown",Ne,We),document.addEventListener("touchstart",Ne,We))}(L)):(Oe(J),Ke(L))})),k(U),Object.assign(f,{focus:Z,updatePosition:ee}),A}}),tt=o({name:"QPopupProxy",props:{...je,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:o,attrs:n}){const{proxy:a}=q(),{$q:l}=a,i=C(!1),s=C(null),r=E((()=>parseInt(e.breakpoint,10))),{canShow:u}=ze({showing:i});function c(){return l.screen.width<r.value||l.screen.height<r.value?"dialog":"menu"}const d=C(c()),f=E((()=>"menu"===d.value?{maxHeight:"99vh"}:{}));function v(e){i.value=!0,o("show",e)}function m(e){i.value=!1,d.value=c(),o("hide",e)}return V((()=>c()),(e=>{!0!==i.value&&(d.value=e)})),Object.assign(a,{show(e){!0===u(e)&&s.value.show(e)},hide(e){s.value.hide(e)},toggle(e){s.value.toggle(e)}}),T(a,"currentComponent",(()=>({type:d.value,ref:s.value}))),()=>{const o={ref:s,...f.value,...n,onShow:v,onHide:m};let a;return"dialog"===d.value?a=Le:(a=et,Object.assign(o,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),_(a,o,t.default)}}});const ot={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},nt={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},at=Object.keys(nt);at.forEach((e=>{nt[e].regex=new RegExp(nt[e].pattern)}));const lt=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+at.join("")+"])|(.)","g"),it=/[.*+?^${}()|[\]\\]/g,st=String.fromCharCode(1),rt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function ut(e,t,o,n){let a,l,i,s,r,u;const c=C(null),d=C(function(){if(v(),!0===c.value){const t=h(g(e.modelValue));return!1!==e.fillMask?y(t):t}return e.modelValue}());function f(e){if(e<a.length)return a.slice(-e);let t="",o=a;const n=o.indexOf(st);if(-1!==n){for(let n=e-o.length;n>0;n--)t+=st;o=o.slice(0,n)+t+o.slice(n)}return o}function v(){if(c.value=void 0!==e.mask&&0!==e.mask.length&&(!0===e.autogrow||["textarea","text","search","url","tel","password"].includes(e.type)),!1===c.value)return s=void 0,a="",void(l="");const t=void 0===ot[e.mask]?e.mask:ot[e.mask],o="string"==typeof e.fillMask&&0!==e.fillMask.length?e.fillMask.slice(0,1):"_",n=o.replace(it,"\\$&"),r=[],u=[],d=[];let f=!0===e.reverseFillMask,v="",m="";t.replace(lt,((e,t,o,n,a)=>{if(void 0!==n){const e=nt[n];d.push(e),m=e.negate,!0===f&&(u.push("(?:"+m+"+)?("+e.pattern+"+)?(?:"+m+"+)?("+e.pattern+"+)?"),f=!1),u.push("(?:"+m+"+)?("+e.pattern+")?")}else if(void 0!==o)v="\\"+("\\"===o?"":o),d.push(o),r.push("([^"+v+"]+)?"+v+"?");else{const e=void 0!==t?t:a;v="\\"===e?"\\\\\\\\":e.replace(it,"\\\\$&"),d.push(e),r.push("([^"+v+"]+)?"+v+"?")}}));const p=new RegExp("^"+r.join("")+"("+(""===v?".":"[^"+v+"]")+"+)?"+(""===v?"":"["+v+"]*")+"$"),h=u.length-1,g=u.map(((t,o)=>0===o&&!0===e.reverseFillMask?new RegExp("^"+n+"*"+t):o===h?new RegExp("^"+t+"("+(""===m?".":m)+"+)?"+(!0===e.reverseFillMask?"$":n+"*")):new RegExp("^"+t)));i=d,s=t=>{const o=p.exec(!0===e.reverseFillMask?t:t.slice(0,d.length+1));null!==o&&(t=o.slice(1).join(""));const n=[],a=g.length;for(let e=0,l=t;e<a;e++){const t=g[e].exec(l);if(null===t)break;l=l.slice(t.shift().length),n.push(...t)}return 0!==n.length?n.join(""):t},a=d.map((e=>"string"==typeof e?e:st)).join(""),l=a.split(st).join(o)}function m(t,i,s){const u=n.value,c=u.selectionEnd,f=u.value.length-c,m=g(t);!0===i&&v();const x=h(m),b=!1!==e.fillMask?y(x):x,w=d.value!==b;u.value!==b&&(u.value=b),!0===w&&(d.value=b),document.activeElement===u&&S((()=>{if(b!==l)if("insertFromPaste"!==s||!0===e.reverseFillMask)if(-1===["deleteContentBackward","deleteContentForward"].indexOf(s))if(!0===e.reverseFillMask)if(!0===w){const e=Math.max(0,b.length-(b===l?0:Math.min(x.length,f+1)));1===e&&1===c?u.setSelectionRange(e,e,"forward"):p.rightReverse(u,e)}else{const e=b.length-f;u.setSelectionRange(e,e,"backward")}else if(!0===w){const e=Math.max(0,a.indexOf(st),Math.min(x.length,c)-1);p.right(u,e)}else{const e=c-1;p.right(u,e)}else{const t=!0===e.reverseFillMask?0===c?b.length>x.length?1:0:Math.max(0,b.length-(b===l?0:Math.min(x.length,f)+1))+1:c;u.setSelectionRange(t,t,"forward")}else{const e=u.selectionEnd;let t=c-1;for(let o=r;o<=t&&o<e;o++)a[o]!==st&&t++;p.right(u,t)}else{const t=!0===e.reverseFillMask?l.length:0;u.setSelectionRange(t,t,"forward")}}));const k=!0===e.unmaskedValue?g(b):b;String(e.modelValue)===k||null===e.modelValue&&""===k||o(k,!0)}V((()=>e.type+e.autogrow),v),V((()=>e.mask),(o=>{if(void 0!==o)m(d.value,!0);else{const o=g(d.value);v(),e.modelValue!==o&&t("update:modelValue",o)}})),V((()=>e.fillMask+e.reverseFillMask),(()=>{!0===c.value&&m(d.value,!0)})),V((()=>e.unmaskedValue),(()=>{!0===c.value&&m(d.value)}));const p={left(e,t){const o=-1===a.slice(t-1).indexOf(st);let n=Math.max(0,t-1);for(;n>=0;n--)if(a[n]===st){t=n,!0===o&&t++;break}if(n<0&&void 0!==a[t]&&a[t]!==st)return p.right(e,0);t>=0&&e.setSelectionRange(t,t,"backward")},right(e,t){const o=e.value.length;let n=Math.min(o,t+1);for(;n<=o;n++){if(a[n]===st){t=n;break}a[n-1]===st&&(t=n)}if(n>o&&void 0!==a[t-1]&&a[t-1]!==st)return p.left(e,o);e.setSelectionRange(t,t,"forward")},leftReverse(e,t){const o=f(e.value.length);let n=Math.max(0,t-1);for(;n>=0;n--){if(o[n-1]===st){t=n;break}if(o[n]===st&&(t=n,0===n))break}if(n<0&&void 0!==o[t]&&o[t]!==st)return p.rightReverse(e,0);t>=0&&e.setSelectionRange(t,t,"backward")},rightReverse(e,t){const o=e.value.length,n=f(o),a=-1===n.slice(0,t+1).indexOf(st);let l=Math.min(o,t+1);for(;l<=o;l++)if(n[l-1]===st){(t=l)>0&&!0===a&&t--;break}if(l>o&&void 0!==n[t-1]&&n[t-1]!==st)return p.leftReverse(e,o);e.setSelectionRange(t,t,"forward")}};function h(t){if(null==t||""===t)return"";if(!0===e.reverseFillMask)return function(e){const t=i,o=a.indexOf(st);let n=e.length-1,l="";for(let a=t.length-1;a>=0&&-1!==n;a--){const i=t[a];let s=e[n];if("string"==typeof i)l=i+l,s===i&&n--;else{if(void 0===s||!i.regex.test(s))return l;do{l=(void 0!==i.transform?i.transform(s):s)+l,n--,s=e[n]}while(o===a&&void 0!==s&&i.regex.test(s))}}return l}(t);const o=i;let n=0,l="";for(let e=0;e<o.length;e++){const a=t[n],i=o[e];if("string"==typeof i)l+=i,a===i&&n++;else{if(void 0===a||!i.regex.test(a))return l;l+=void 0!==i.transform?i.transform(a):a,n++}}return l}function g(e){return"string"!=typeof e||void 0===s?"number"==typeof e?s(""+e):e:s(e)}function y(t){return l.length-t.length<=0?t:!0===e.reverseFillMask&&0!==t.length?l.slice(0,-t.length)+t:t+l.slice(t.length)}return{innerValue:d,hasMask:c,moveCursorForPaste:function(e,t,o){const n=h(g(e.value));t=Math.max(0,a.indexOf(st),Math.min(n.length,t)),r=t,e.setSelectionRange(t,o,"forward")},updateMaskValue:m,onMaskedKeydown:function(o){if(t("keydown",o),!0===D(o)||!0===o.altKey)return;const a=n.value,l=a.selectionStart,i=a.selectionEnd;if(o.shiftKey||(u=void 0),37===o.keyCode||39===o.keyCode){o.shiftKey&&void 0===u&&(u="forward"===a.selectionDirection?l:i);const t=p[(39===o.keyCode?"right":"left")+(!0===e.reverseFillMask?"Reverse":"")];if(o.preventDefault(),t(a,u===l?i:l),o.shiftKey){const e=a.selectionStart;a.setSelectionRange(Math.min(u,e),Math.max(u,e),"forward")}}else 8===o.keyCode&&!0!==e.reverseFillMask&&l===i?(p.left(a,l),a.setSelectionRange(a.selectionStart,i,"backward")):46===o.keyCode&&!0===e.reverseFillMask&&l===i&&(p.rightReverse(a,i),a.setSelectionRange(l,a.selectionEnd,"forward"))},onMaskedClick:function(e){t("click",e),u=void 0}}}const ct=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,dt=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,ft=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,vt=/[a-z0-9_ -]$/i;var mt=o({name:"QInput",inheritAttrs:!1,props:{...d,...rt,...f,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...v,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:o}){const{proxy:n}=q(),{$q:a}=n,l={};let i,s,r,u=NaN,d=null;const f=C(null),v=m(e),{innerValue:x,hasMask:b,moveCursorForPaste:w,updateMaskValue:M,onMaskedKeydown:R,onMaskedClick:O}=ut(e,t,I,f),P=p(e,!0),$=E((()=>h(x.value))),F=function(e){return function(t){if("compositionend"===t.type||"change"===t.type){if(!0!==t.target.qComposing)return;t.target.qComposing=!1,e(t)}else"compositionupdate"===t.type&&!0!==t.target.qComposing&&"string"==typeof t.data&&!0==(!0===B.is.firefox?!1===vt.test(t.data):!0===ct.test(t.data)||!0===dt.test(t.data)||!0===ft.test(t.data))&&(t.target.qComposing=!0)}}(K),H=g(),L=E((()=>"textarea"===e.type||!0===e.autogrow)),j=E((()=>!0===L.value||["text","search","url","tel","password"].includes(e.type))),z=E((()=>{const t={...H.splitAttrs.listeners.value,onInput:K,onPaste:D,onChange:U,onBlur:Y,onFocus:N};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=F,!0===b.value&&(t.onKeydown=R,t.onClick=O),!0===e.autogrow&&(t.onAnimationend=Q),t})),W=E((()=>{const t={tabindex:0,"data-autofocus":!0===e.autofocus||void 0,rows:"textarea"===e.type?6:void 0,"aria-label":e.label,name:v.value,...H.splitAttrs.attributes.value,id:H.targetUid.value,maxlength:e.maxlength,disabled:!0===e.disable,readonly:!0===e.readonly};return!1===L.value&&(t.type=e.type),!0===e.autogrow&&(t.rows=1),t}));function D(o){if(!0===b.value&&!0!==e.reverseFillMask){const e=o.target;w(e,e.selectionStart,e.selectionEnd)}t("paste",o)}function K(o){if(!o||!o.target)return;if("file"===e.type)return void t("update:modelValue",o.target.files);const n=o.target.value;if(!0!==o.target.qComposing){if(!0===b.value)M(n,!1,o.inputType);else if(I(n),!0===j.value&&o.target===document.activeElement){const{selectionStart:e,selectionEnd:t}=o.target;void 0!==e&&void 0!==t&&S((()=>{o.target===document.activeElement&&0===n.indexOf(o.target.value)&&o.target.setSelectionRange(e,t)}))}!0===e.autogrow&&Z()}else l.value=n}function Q(e){t("animationend",e),Z()}function I(o,n){r=()=>{d=null,"number"!==e.type&&!0===l.hasOwnProperty("value")&&delete l.value,e.modelValue!==o&&u!==o&&(u=o,!0===n&&(s=!0),t("update:modelValue",o),S((()=>{u===o&&(u=NaN)}))),r=void 0},"number"===e.type&&(i=!0,l.value=o),void 0!==e.debounce?(null!==d&&clearTimeout(d),l.value=o,d=setTimeout(r,e.debounce)):r()}function Z(){requestAnimationFrame((()=>{const e=f.value;if(null!==e){const t=e.parentNode.style,{scrollTop:o}=e,{overflowY:n,maxHeight:l}=!0===a.platform.is.firefox?{}:window.getComputedStyle(e),i=void 0!==n&&"scroll"!==n;!0===i&&(e.style.overflowY="hidden"),t.marginBottom=e.scrollHeight-1+"px",e.style.height="1px",e.style.height=e.scrollHeight+"px",!0===i&&(e.style.overflowY=parseInt(l,10)<e.scrollHeight?"auto":"hidden"),t.marginBottom="",e.scrollTop=o}}))}function U(e){F(e),null!==d&&(clearTimeout(d),d=null),void 0!==r&&r(),t("change",e.target.value)}function Y(t){void 0!==t&&N(t),null!==d&&(clearTimeout(d),d=null),void 0!==r&&r(),i=!1,s=!1,delete l.value,"file"!==e.type&&setTimeout((()=>{null!==f.value&&(f.value.value=void 0!==x.value?x.value:"")}))}function X(){return!0===l.hasOwnProperty("value")?l.value:void 0!==x.value?x.value:""}V((()=>e.type),(()=>{f.value&&(f.value.value=e.modelValue)})),V((()=>e.modelValue),(t=>{if(!0===b.value){if(!0===s&&(s=!1,String(t)===u))return;M(t)}else x.value!==t&&(x.value=t,"number"===e.type&&!0===l.hasOwnProperty("value")&&(!0===i?i=!1:delete l.value));!0===e.autogrow&&S(Z)})),V((()=>e.autogrow),(e=>{!0===e?S(Z):null!==f.value&&o.rows>0&&(f.value.style.height="auto")})),V((()=>e.dense),(()=>{!0===e.autogrow&&S(Z)})),k((()=>{Y()})),A((()=>{!0===e.autogrow&&Z()})),Object.assign(H,{innerValue:x,fieldClass:E((()=>"q-"+(!0===L.value?"textarea":"input")+(!0===e.autogrow?" q-textarea--autogrow":""))),hasShadow:E((()=>"file"!==e.type&&"string"==typeof e.shadowText&&0!==e.shadowText.length)),inputRef:f,emitValue:I,hasValue:$,floatingLabel:E((()=>!0===$.value&&("number"!==e.type||!1===isNaN(x.value))||h(e.displayValue))),getControl:()=>_(!0===L.value?"textarea":"input",{ref:f,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...W.value,...z.value,..."file"!==e.type?{value:X()}:P.value}),getShadowControl:()=>_("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(!0===L.value?"":" text-no-wrap")},[_("span",{class:"invisible"},X()),_("span",e.shadowText)])});const G=y(H);return Object.assign(n,{focus:function(){c((()=>{const e=document.activeElement;null===f.value||f.value===e||null!==e&&e.id===H.targetUid.value||f.value.focus({preventScroll:!0})}))},select:function(){null!==f.value&&f.value.select()},getNativeElement:()=>f.value}),T(n,"nativeEl",(()=>f.value)),G}}),pt=o({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:o,emit:a}){const l=q(),i=C(null);let s=0;const r=[];function u(o){const n="boolean"==typeof o?o:!0!==t.noErrorFocus,l=++s,i=(e,t)=>{a("validation"+(!0===e?"Success":"Error"),t)},u=e=>{const t=e.validate();return"function"==typeof t.then?t.then((t=>({valid:t,comp:e})),(t=>({valid:!1,comp:e,err:t}))):Promise.resolve({valid:t,comp:e})};return(!0===t.greedy?Promise.all(r.map(u)).then((e=>e.filter((e=>!0!==e.valid)))):r.reduce(((e,t)=>e.then((()=>u(t).then((e=>{if(!1===e.valid)return Promise.reject(e)}))))),Promise.resolve()).catch((e=>[e]))).then((t=>{if(void 0===t||0===t.length)return l===s&&i(!0),!0;if(l===s){const{comp:o,err:a}=t[0];if(void 0!==a&&console.error(a),i(!1,o),!0===n){const o=t.find((({comp:t})=>"function"==typeof t.focus&&!1===e(t.$)));void 0!==o&&o.comp.focus()}}return!1}))}function d(){s++,r.forEach((e=>{"function"==typeof e.resetValidation&&e.resetValidation()}))}function f(e){void 0!==e&&W(e);const o=s+1;u().then((n=>{o===s&&!0===n&&(void 0!==t.onSubmit?a("submit",e):void 0!==e&&void 0!==e.target&&"function"==typeof e.target.submit&&e.target.submit())}))}function v(e){void 0!==e&&W(e),a("reset"),S((()=>{d(),!0===t.autofocus&&!0!==t.noResetFocus&&m()}))}function m(){c((()=>{if(null===i.value)return;const e=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),(e=>-1!==e.tabIndex));null!=e&&e.focus({preventScroll:!0})}))}K(I,{bindComponent(e){r.push(e)},unbindComponent(e){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}});let p=!1;return w((()=>{p=!0})),Q((()=>{!0===p&&!0===t.autofocus&&m()})),A((()=>{!0===t.autofocus&&m()})),Object.assign(l.proxy,{validate:u,resetValidation:d,submit:f,reset:v,focus:m,getValidationComponents:()=>r}),()=>_("form",{class:"q-form",ref:i,onSubmit:f,onReset:v},n(o.default))}});function ht(e){if(!1===e)return 0;if(!0===e||void 0===e)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var gt=l({name:"close-popup",beforeMount(e,{value:o}){const n={depth:ht(o),handler(o){0!==n.depth&&setTimeout((()=>{const a=function(e){return we.find((t=>null!==t.contentEl&&t.contentEl.contains(e)))}(e);void 0!==a&&function(e,o,n){for(;0!==n&&null!=e;){if(!0===e.__qPortal){if(n--,"QMenu"===e.$options.name){e=ke(e,o);continue}e.hide(o)}e=t(e)}}(a,o,n.depth)}))},handlerKey(e){!0===P(e,13)&&n.handler(e)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=ht(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const yt={class:"row items-center justify-end"},xt=Object.assign({name:"IndexPage"},{__name:"add",setup(e){let t=me(),o=Z();const n=U({date:pe(),content:""});function a(){t.addDiary(oe(n)),o.push("/")}return(e,t)=>(Y(),X(x,null,{default:G((()=>[J(pt,{onSubmit:e.onSubmit,onReset:e.onReset,class:"q-gutter-md"},{default:G((()=>[J(mt,{filled:"",modelValue:n.date,"onUpdate:modelValue":t[1]||(t[1]=e=>n.date=e),mask:"date",rules:["date"],label:"选择日期 *"},{append:G((()=>[J(i,{name:"event",class:"cursor-pointer"},{default:G((()=>[J(tt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:G((()=>[J(b,{modelValue:n.date,"onUpdate:modelValue":t[0]||(t[0]=e=>n.date=e),"today-btn":""},{default:G((()=>[ee("div",yt,[te(J(s,{label:"Close",color:"primary",flat:""},null,512),[[gt]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),J(mt,{label:"正文 *",modelValue:n.content,"onUpdate:modelValue":t[2]||(t[2]=e=>n.content=e),filled:"",autogrow:"",type:"textarea"},null,8,["modelValue"]),J(s,{color:"primary",label:"提交",onClick:a})])),_:1},8,["onSubmit","onReset"])])),_:1}))}});export{xt as default};
