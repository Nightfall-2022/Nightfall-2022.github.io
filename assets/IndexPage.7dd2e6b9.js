import{c as e,d as l,l as t,m as a,b as i,Q as n,n as o,R as r,h as s,e as u}from"./QBtn.8aa00b81.js";import{T as d}from"./QItem.b688c7ed.js";import{u as c,a as p,h as v,c as m,g as f,m as g}from"./diary.06f8a4d0.js";import{c as b,h,g as y,N as x,r as q,L as S,P as _,Y as V,O as C,w as k,b as F,Z as z,m as B,o as j,s as $,B as O,x as D,v as N,u as w,F as A,H as L,_ as T,y as I,z as Q,$ as R}from"./index.92600922.js";import{u as U,a as E,b as M,c as P,d as K,e as W,f as Y,g as X,Q as H,h as J}from"./QDate.ddfbf565.js";const Z={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},G={xs:2,sm:4,md:8,lg:16,xl:24};e({name:"QSeparator",props:{...c,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const l=y(),t=p(e,l.proxy.$q),a=b((()=>!0===e.vertical?"vertical":"horizontal")),i=b((()=>` q-separator--${a.value}`)),n=b((()=>!1!==e.inset?`${i.value}-${Z[e.inset]}`:"")),o=b((()=>`q-separator${i.value}${n.value}`+(void 0!==e.color?` bg-${e.color}`:"")+(!0===t.value?" q-separator--dark":""))),r=b((()=>{const l={};if(void 0!==e.size&&(l[!0===e.vertical?"width":"height"]=e.size),!1!==e.spaced){const t=!0===e.spaced?`${G.md}px`:e.spaced in G?`${G[e.spaced]}px`:e.spaced,a=!0===e.vertical?["Left","Right"]:["Top","Bottom"];l[`margin${a[0]}`]=l[`margin${a[1]}`]=t}return l}));return()=>h("hr",{class:o.value,style:r.value,"aria-orientation":a.value})}});const ee=["top","middle","bottom"];e({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>ee.includes(e)}},setup(e,{slots:t}){const a=b((()=>void 0!==e.align?{verticalAlign:e.align}:null)),i=b((()=>{const l=!0===e.outline&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${!0===e.multiLine?"multi":"single"}-line`+(!0===e.outline?" q-badge--outline":void 0!==e.color?` bg-${e.color}`:"")+(void 0!==l?` text-${l}`:"")+(!0===e.floating?" q-badge--floating":"")+(!0===e.rounded?" q-badge--rounded":"")+(!0===e.transparent?" q-badge--transparent":"")}));return()=>h("div",{class:i.value,style:a.value,role:"status","aria-label":e.label},l(t.default,void 0!==e.label?[e.label]:[]))}});const le={xs:8,sm:10,md:14,lg:20,xl:24};var te=e({name:"QChip",props:{...c,...t,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:t}){const{proxy:{$q:s}}=y(),u=p(e,s),d=a(e,le),c=b((()=>!0===e.selected||void 0!==e.icon)),v=b((()=>!0===e.selected?e.iconSelected||s.iconSet.chip.selected:e.icon)),m=b((()=>e.iconRemove||s.iconSet.chip.remove)),f=b((()=>!1===e.disable&&(!0===e.clickable||null!==e.selected))),g=b((()=>{const l=!0===e.outline&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(!1===e.outline&&void 0!==e.color?` bg-${e.color}`:"")+(l?` text-${l} q-chip--colored`:"")+(!0===e.disable?" disabled":"")+(!0===e.dense?" q-chip--dense":"")+(!0===e.outline?" q-chip--outline":"")+(!0===e.selected?" q-chip--selected":"")+(!0===f.value?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(!0===e.square?" q-chip--square":"")+(!0===u.value?" q-chip--dark q-dark":"")})),q=b((()=>{const l=!0===e.disable?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0};return{chip:l,remove:{...l,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||s.lang.label.remove}}}));function S(e){13===e.keyCode&&_(e)}function _(l){e.disable||(t("update:selected",!e.selected),t("click",l))}function V(l){void 0!==l.keyCode&&13!==l.keyCode||(x(l),!1===e.disable&&(t("update:modelValue",!1),t("remove")))}return()=>{if(!1===e.modelValue)return;const t={class:g.value,style:d.value};return!0===f.value&&Object.assign(t,q.value.chip,{onClick:_,onKeyup:S}),i("div",t,function(){const t=[];!0===f.value&&t.push(h("div",{class:"q-focus-helper"})),!0===c.value&&t.push(h(n,{class:"q-chip__icon q-chip__icon--left",name:v.value}));const a=void 0!==e.label?[h("div",{class:"ellipsis"},[e.label])]:void 0;return t.push(h("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},o(l.default,a))),e.iconRight&&t.push(h(n,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),!0===e.removable&&t.push(h(n,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:m.value,...q.value.remove,onClick:V,onKeyup:V})),t}(),"ripple",!1!==e.ripple&&!0!==e.disable,(()=>[[r,e.ripple]]))}}});function ae(e,l,t,a){const i=[];return e.forEach((e=>{!0===a(e)?i.push(e):l.push({failedPropValidation:t,file:e})})),i}function ie(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),x(e)}var ne=e({name:"QFile",inheritAttrs:!1,props:{...U,...E,...{multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...M,"rejected"],setup(e,{slots:l,emit:t,attrs:a}){const{proxy:i}=y(),n=P(),o=q(null),r=q(!1),s=K(e),{pickFiles:u,onDragover:d,onDragleave:c,processFiles:p,getDndNode:m}=function({editable:e,dnd:l,getFileInput:t,addFilesToQueue:a}){const{props:i,emit:n,proxy:o}=y(),r=q(null),s=b((()=>void 0!==i.accept?i.accept.split(",").map((e=>"*"===(e=e.trim())?"*/":(e.endsWith("/*")&&(e=e.slice(0,e.length-1)),e.toUpperCase()))):null)),u=b((()=>parseInt(i.maxFiles,10))),d=b((()=>parseInt(i.maxTotalSize,10)));function c(l){if(e.value)if(l!==Object(l)&&(l={target:null}),null!==l.target&&!0===l.target.matches('input[type="file"]'))0===l.clientX&&0===l.clientY&&S(l);else{const e=t();e&&e!==l.target&&e.click(l)}}function p(l){e.value&&l&&a(null,l)}function v(e){x(e),!0==(null!==e.relatedTarget||!0!==_.is.safari?e.relatedTarget!==r.value:!1===document.elementsFromPoint(e.clientX,e.clientY).includes(r.value))&&(l.value=!1)}function m(e){ie(e);const t=e.dataTransfer.files;0!==t.length&&a(null,t),l.value=!1}return Object.assign(o,{pickFiles:c,addFiles:p}),{pickFiles:c,addFiles:p,onDragover:function(e){ie(e),!0!==l.value&&(l.value=!0)},onDragleave:v,processFiles:function(e,l,t,a){let o=Array.from(l||e.target.files);const r=[],c=()=>{0!==r.length&&n("rejected",r)};if(void 0!==i.accept&&-1===s.value.indexOf("*/")&&(o=ae(o,r,"accept",(e=>s.value.some((l=>e.type.toUpperCase().startsWith(l)||e.name.toUpperCase().endsWith(l))))),0===o.length))return c();if(void 0!==i.maxFileSize){const e=parseInt(i.maxFileSize,10);if(o=ae(o,r,"max-file-size",(l=>l.size<=e)),0===o.length)return c()}if(!0!==i.multiple&&0!==o.length&&(o=[o[0]]),o.forEach((e=>{e.__key=e.webkitRelativePath+e.lastModified+e.name+e.size})),!0===a){const e=t.map((e=>e.__key));o=ae(o,r,"duplicate",(l=>!1===e.includes(l.__key)))}if(0===o.length)return c();if(void 0!==i.maxTotalSize){let e=!0===a?t.reduce(((e,l)=>e+l.size),0):0;if(o=ae(o,r,"max-total-size",(l=>(e+=l.size,e<=d.value))),0===o.length)return c()}if("function"==typeof i.filter){const e=i.filter(o);o=ae(o,r,"filter",(l=>e.includes(l)))}if(void 0!==i.maxFiles){let e=!0===a?t.length:0;if(o=ae(o,r,"max-files",(()=>(e++,e<=u.value))),0===o.length)return c()}return c(),0!==o.length?o:void 0},getDndNode:function(e){if(!0===l.value)return h("div",{ref:r,class:`q-${e}__dnd absolute-full`,onDragenter:ie,onDragover:ie,onDragleave:v,onDrop:m})},maxFilesNumber:u,maxTotalSizeNumber:d}}({editable:n.editable,dnd:r,getFileInput:L,addFilesToQueue:T}),f=W(e),g=b((()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[])),k=b((()=>Y(g.value))),F=b((()=>g.value.map((e=>e.name)).join(", "))),z=b((()=>v(g.value.reduce(((e,l)=>e+l.size),0)))),B=b((()=>({totalSize:z.value,filesNumber:g.value.length,maxFiles:e.maxFiles}))),j=b((()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:s.value,...a,id:n.targetUid.value,disabled:!0!==n.editable.value}))),$=b((()=>"q-file q-field--auto-height"+(!0===r.value?" q-file--dnd":""))),O=b((()=>!0===e.multiple&&!0===e.append));function D(e){const l=g.value.slice();l.splice(e,1),N(l)}function N(l){t("update:modelValue",!0===e.multiple?l:l[0])}function w(e){13===e.keyCode&&C(e)}function A(e){13!==e.keyCode&&32!==e.keyCode||u(e)}function L(){return o.value}function T(l,t){const a=p(l,t,g.value,O.value),i=L();null!=i&&(i.value=""),void 0!==a&&((!0===e.multiple?e.modelValue&&a.every((e=>g.value.includes(e))):e.modelValue===a[0])||N(!0===O.value?g.value.concat(a):a))}function I(){return[h("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Q(){const l={ref:o,...j.value,...f.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:T};return!0===e.multiple&&(l.multiple=!0),h("input",l)}return Object.assign(n,{fieldClass:$,emitValue:N,hasValue:k,inputRef:o,innerValue:g,floatingLabel:b((()=>!0===k.value||Y(e.displayValue))),computedCounter:b((()=>{if(void 0!==e.counterLabel)return e.counterLabel(B.value);const l=e.maxFiles;return`${g.value.length}${void 0!==l?" / "+l:""} (${z.value})`})),getControlChild:()=>m("file"),getControl:()=>{const t={ref:n.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return!0===n.editable.value&&Object.assign(t,{onDragover:d,onDragleave:c,onKeydown:w,onKeyup:A}),h("div",t,[Q()].concat(function(){if(void 0!==l.file)return 0===g.value.length?I():g.value.map(((e,t)=>l.file({index:t,file:e,ref:this})));if(void 0!==l.selected)return 0===g.value.length?I():l.selected({files:g.value,ref:this});if(!0===e.useChips)return 0===g.value.length?I():g.value.map(((l,t)=>h(te,{key:"file-"+t,removable:n.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{D(t)}},(()=>h("span",{class:"ellipsis",textContent:l.name})))));const t=void 0!==e.displayValue?e.displayValue:F.value;return 0!==t.length?[h("div",{class:e.inputClass,style:e.inputStyle,textContent:t})]:I()}()))}}),Object.assign(i,{removeAtIndex:D,removeFile:function(e){const l=g.value.indexOf(e);-1!==l&&D(l)},getNativeElement:()=>o.value}),V(i,"nativeEl",(()=>o.value)),X(n)}}),oe=e({name:"QSplitter",props:{...c,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>2===e.length&&("number"==typeof e[0]&&"number"==typeof e[1]&&(e[0]>=0&&e[0]<=e[1]))},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:a}){const{proxy:{$q:n}}=y(),o=p(e,n),r=q(null),u={before:q(null),after:q(null)},c=b((()=>`q-splitter no-wrap ${!0===e.horizontal?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${!0===e.disable?"disabled":"workable"}`+(!0===o.value?" q-splitter--dark":""))),v=b((()=>!0===e.horizontal?"height":"width")),m=b((()=>!0!==e.reverse?"before":"after")),f=b((()=>void 0!==e.limits?e.limits:"%"===e.unit?[10,90]:[50,1/0]));function g(l){return("%"===e.unit?l:Math.round(l))+e.unit}const x=b((()=>({[m.value]:{[v.value]:g(e.modelValue)}})));let S,_,V,C,z;function B(l){if(!0===l.isFirst){const l=r.value.getBoundingClientRect()[v.value];return S=!0===e.horizontal?"up":"left",_="%"===e.unit?100:l,V=Math.min(_,f.value[1],Math.max(f.value[0],e.modelValue)),C=(!0!==e.reverse?1:-1)*(!0===e.horizontal?1:!0===n.lang.rtl?-1:1)*("%"===e.unit?0===l?0:100/l:1),void r.value.classList.add("q-splitter--active")}if(!0===l.isFinal)return z!==e.modelValue&&a("update:modelValue",z),void r.value.classList.remove("q-splitter--active");const t=V+C*(l.direction===S?-1:1)*l.distance[!0===e.horizontal?"y":"x"];z=Math.min(_,f.value[1],Math.max(f.value[0],t)),u[m.value].value.style[v.value]=g(z),!0===e.emitImmediately&&e.modelValue!==z&&a("update:modelValue",z)}const j=b((()=>[[d,B,void 0,{[!0===e.horizontal?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]));function $(e,l){e<l[0]?a("update:modelValue",l[0]):e>l[1]&&a("update:modelValue",l[1])}return k((()=>e.modelValue),(e=>{$(e,f.value)})),k((()=>e.limits),(()=>{F((()=>{$(e.modelValue,f.value)}))})),()=>{const a=[h("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(!0===e.reverse?" col":""),e.beforeClass],style:x.value.before},s(t.before)),h("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":!0===e.disable?"true":void 0},[i("div",{class:"q-splitter__separator-area absolute-full"},s(t.separator),"sep",!0!==e.disable,(()=>j.value))]),h("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(!0===e.reverse?"":" col"),e.afterClass],style:x.value.after},s(t.after))];return h("div",{class:c.value,ref:r},l(t.default,a))}}});const re=R("br",null,null,-1),se=R("br",null,null,-1),ue=R("br",null,null,-1),de={class:"title"},ce={class:"content"},pe={key:1,class:"noDiary"},ve=R("div",null,"暂无日记",-1),me=Object.assign({name:"IndexPage"},{__name:"IndexPage",setup(e){let l=q(null),t=m();async function a(){const e=l.value;if(!e||!e.name.endsWith(".json"))return void alert("请选择一个 .json 文件");const a=await e.text();let i=JSON.parse(a).data;console.log("已解析:",i),t.diaries=i,d.value=t.diaries[t.diaries.length-1].date,v()}function i(){t.clearDiary()}function o(){t.deleteDiary(c.index),h()}let r=z(),s=q(50),d=q(f()),c=B({date:"",content:"",index:""}),p=b((()=>{let e=[];return t.diaries.forEach((l=>{""!==l.content&&e.push(l.date)})),e}));function v(){let e=d.value,l=t.diaries.findIndex((l=>l.date===e));-1!==l?(c.date=t.diaries[l].date,c.content=t.diaries[l].content,c.index=l):h(),console.log(c)}function h(){c.date="",c.content="",c.index=""}return j((()=>{v()})),(e,m)=>($(),O(A,null,[D("",!0),N(H,{class:"q-pa-md"},{default:w((()=>[N(u,{color:"deep-orange",label:"清空缓存",onClick:i}),re,se,N(ne,{filled:"","bottom-slots":"",modelValue:L(l),"onUpdate:modelValue":[m[1]||(m[1]=e=>T(l)?l.value=e:l=e),a],label:"选择日记.json文件",counter:"","max-files":"1"},{before:w((()=>[N(n,{name:"folder_open"})])),hint:w((()=>[I(" 共"+Q(L(t).diaries.length)+"条日记 ",1)])),_:1},8,["modelValue"]),ue,N(oe,{modelValue:L(s),"onUpdate:modelValue":m[4]||(m[4]=e=>T(s)?s.value=e:s=e),horizontal:!0,class:"flex center"},{before:w((()=>[N(J,{modelValue:L(d),"onUpdate:modelValue":[m[2]||(m[2]=e=>T(d)?d.value=e:d=e),v],events:L(p),"event-color":"orange",style:{width:"100%"},locale:L(g)},null,8,["modelValue","events","locale"])])),after:w((()=>[""!==L(c).content?($(),O(A,{key:0},[R("div",de,[R("span",null,"日记-"+Q(L(c).date),1),N(u,{flat:"",dense:"",round:"",onClick:o,label:"删除"})]),R("p",ce,Q(L(c).content),1)],64)):($(),O("div",pe,[ve,N(u,{round:"",color:"primary",onClick:m[3]||(m[3]=e=>L(r).push("/add"))},{default:w((()=>[I("添加")])),_:1})]))])),_:1},8,["modelValue"])])),_:1})],64))}});export{me as default};
